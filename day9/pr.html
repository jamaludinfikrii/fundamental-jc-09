<script>
    class Product {
        constructor(a,b){
            this.nama = a ; 
            this.harga = b
        }
    }
    var product = [
       new Product('Kiwi', 2000),
       new Product('Jeruk' , 2000),
       new Product('Aple' , 3000),
       new Product('Anggur' , 5000),
       new Product('Pepaya' , 25000)
    ]

    //
    //
    //

    class Cart {
        constructor(a,b,c){
            this.namaProduk = a;
            this.harga = b;
            this.qty = c
        }
    }

    var cart = [
        new Cart('Jeruk' , 3000 , 4),
        new Cart('Kiwi' , 2000 , 3)
    ]

    // ==================== FUNCTIONS ===============
    function PrintCart(cart){
        var hasil = ''
        if(cart.length == 0){
            return 'Keranjang Kosong, Silahkan Berbelanja dahulu'
        }
        var totalHarga = 0
        for(var i = 0 ; i < cart.length ; i++){
            hasil += (i+1) + '. ' +cart[i].namaProduk 
            + ' Rp. ' + cart[i].harga + ' X ' + cart[i].qty + ' = ' + (cart[i].harga*cart[i].qty) + '\n'

            totalHarga += cart[i].harga * cart[i].qty
        }
        hasil += '=================================\n'
        hasil += 'Total Harga =  Rp. ' + totalHarga
        return hasil
    }


    function PrintMenu(prod){
        var hasil = ''
        for(var i = 0 ; i < prod.length ; i++){
            hasil += (i+1) + '. ' + prod[i].nama + ' Rp. ' + prod[i].harga + '\n'
        }
        return hasil
    }   




    // ================= PROGRAMS ========================
    var a = '1.User \n 2.admin \n 3.Exit'
    do{
        var menuUtama = true
        var menuLogin =  prompt(a)

        // ================= MENU USER ======================
        if(menuLogin == 1){
            do{
                var menuUtamaUser = true
                var menuUser =  prompt('1. Show Cart \n 2. Belanja \n 3. Exit')
                if(menuUser == 1){
                    var text = PrintCart(cart)
                    alert(text)
                }else if(menuUser == 2){

                    var text = PrintMenu(product)
                    text += '=====================\n Mau Belanja Yang Mana'
                    var pilihanBelanja = prompt(text) // 1
                    var qtyBelanja = prompt('Mau Berapa Banyak ' + product[pilihanBelanja-1].nama +' Yang Anda Beli?' )
                    var ada = false
                    var index = 0 //1
                    for(var i = 0 ; i < cart.length ; i++){
                        if(cart[i].namaProduk == product[pilihanBelanja-1].nama){
                            ada = true
                            index = i
                        }
                    }

                    if(ada == true){
                        cart[index].qty += parseInt(qtyBelanja)
                    }else{
                       var namaProdukBaru = product[pilihanBelanja-1].nama
                       var hargaProdukBaru = product[pilihanBelanja-1].harga
                       var qtyProdukBaru = parseInt(qtyBelanja)
                       var newCart = new Cart(namaProdukBaru,hargaProdukBaru,qtyProdukBaru)
                       cart.push(newCart)
                    }

                    alert('Selamat Produk Berhasi Dimasukan Keranjang')
                }else if(menuUser == 3){
                    menuUtamaUser = false
                    menuUtama = false
                }
                if(menuUtamaUser == true){
                    menuUtamaUser = confirm('Mau Ke Menu User Lagi?')
                }
            }while(menuUtamaUser == true)
            
        }else if(menuLogin == 2){

        // ================= MENU ADMIN ======================
            prompt('1. Show Product \n 2. Add Product \n 3. Update \n 4. Delete')
        }else if(menuLogin ==3){
            menuUtama = false
        }
        if(menuUtama == true){
            menuUtama = confirm('Mau Ke Menu Utama?')
        }
    }while(menuUtama == true)
    




</script>